<?php

/**     
 * The technical support is guaranteed for all modules proposed by Wyomind.
 * The below code is obfuscated in order to protect the module's copyright as well as the integrity of the license and of the source code.
 * The support cannot apply if modifications have been made to the original source code (https://www.wyomind.com/terms-and-conditions.html).
 * Nonetheless, Wyomind remains available to answer any question you might have and find the solutions adapted to your needs.
 * Feel free to contact our technical team from your Wyomind account in My account > My tickets. 
 * Copyright Â© 2018 Wyomind. All rights reserved.
 * See LICENSE.txt for license details.
 */
  class Wyomind_Elasticsearch_Helper_Indexer_Category extends Wyomind_Elasticsearch_Helper_Indexer_Abstract {public $xcc=null;public $xa9=null;public $x7f=null;  protected $_searchableAttributes;  protected $_categoriesWithPathNames = array();  protected $_blockClass = 'Wyomind_Elasticsearch_Block_Autocomplete_Category';  private $x44cc = null; public $error = "E\154\141\163t\151\x63\163\x65a\162\x63h \x43\141\x74\145g\x6fr\x79\40Inde\170\x20\x3a In\166\141\154i\144 L\x69\143\x65\x6e\x73\145!"; public function __construct() {$x598c = "\150elper";$x5d01 = "\141p\160";$x5d30 = "\x67\145\x74\x4dod\x65\154";$x5b85 = "\147\145t\x52\x65s\x6f\165\162\x63\145M\157\144\x65\154";$x5c92 = "\x64i\163\x70\x61\164c\150Eve\156t"; $this->_construct(); } public function _construct() {$x598c = "h\x65\x6c\160\x65\162";$x5d01 = "\141\x70\160";$x5d30 = "g\145t\x4d\157\144e\154";$x5b85 = "\x67e\164\122e\163\x6f\165\x72\x63\145Mo\x64\145l";$x5c92 = "\144isp\141t\143\x68\105\166\145n\x74"; $this->x44cc = Mage::helper("\x6c\151\x63\x65nse\155a\156\141ge\162\57\x64a\164\141"); $this->x44cc->constructor($this, func_get_args()); }  public function export($x4320 = array()) {$x42e4 = $this->xa9->x44ba->{$this->xa9->x44ba->{$this->x7f->x44ba->{$this->xcc->x44ba->{$this->x7f->x44ba->x584a}}}};$x42d0 = $this->x7f->x4488->{$this->xcc->x4488->{$this->xcc->x4488->x47a8}};$x430d = $this->x7f->x44b2->x4ff2;$x4318 = $this->xcc->x44b2->x5002;$x4363 = $this->xa9->x44b2->x5011;$xab1 = $this->xcc->x4488->x47db;$xfb1 = $this->x7f->x44b2->{$this->xcc->x44b2->x5027};$xb65 = $this->x7f->x44ba->{$this->xa9->x44ba->{$this->xa9->x44ba->x58a7}};$xe85 = $this->xa9->x44b2->{$this->xcc->x44b2->x503f};$xbd8 = $this->x7f->x4488->x4815;$xc00 = $this->xcc->x44ba->x58c8;$xcc6 = $this->xcc->x44b2->{$this->xa9->x44b2->x505f};$xe42 = $this->xcc->x4488->{$this->x7f->x4488->{$this->xcc->x4488->x4839}};$xe83 = $this->xcc->x4488->x483d;$xef7 = $this->x7f->x44ba->{$this->x7f->x44ba->x5909};$xfcc = $this->xcc->x4488->{$this->xa9->x4488->x4863};$x598c = "h\145\x6c\160\x65\162";$x5d01 = "a\x70\160";$x5d30 = "\147e\164\x4d\x6f\x64\x65\154";$x5b85 = "\147\145tR\x65\163\x6f\x75\x72c\145\x4d\157d\x65l";$x5c92 = "d\151\x73\160\141\164ch\x45\166\x65\156\164"; try { ${$this->xcc->x44b2->{$this->xa9->x44b2->x4deb}} = $this; ${$this->x7f->x44ba->{$this->xcc->x44ba->x5623}} = "\x4d\x61\147e"; ${$this->x7f->x4488->{$this->xa9->x4488->{$this->xcc->x4488->{$this->x7f->x4488->x4579}}}} = "h\x65\154\x70er"; ${$this->xcc->x44b2->{$this->x7f->x44b2->x4e06}} = "\164h\162\157\167\x45xce\x70ti\157\x6e"; ${$this->x7f->x4488->x4585} = $x42e4($x42d0()); ${$this->xa9->x44ba->{$this->xcc->x44ba->{$this->xa9->x44ba->x5620}}}->{$this->xcc->x4488->{$this->xcc->x4488->{$this->x7f->x4488->{$this->xa9->x4488->x44d8}}}}->{$this->xa9->x4488->x48e0}(${$this->xcc->x44b2->{$this->xa9->x44b2->x4deb}}, ${$this->xa9->x44b2->{$this->xa9->x44b2->{$this->xcc->x44b2->{$this->x7f->x44b2->x4e0d}}}}); if (${$this->xa9->x44ba->{$this->xcc->x44ba->{$this->xa9->x44ba->x5620}}}->{$this->xa9->x4488->x48f9}(${$this->xa9->x44b2->{$this->xa9->x44b2->{$this->xcc->x44b2->{$this->x7f->x44b2->x4e0d}}}}) != $x42e4(${$this->x7f->x4488->{$this->xa9->x4488->x4586}})) { ${$this->x7f->x44ba->{$this->xa9->x44ba->{$this->xcc->x44ba->x5626}}}::${$this->xa9->x44ba->{$this->xa9->x44ba->{$this->x7f->x44ba->{$this->xa9->x44ba->{$this->x7f->x44ba->x5642}}}}}(${$this->xa9->x4488->x4569}::${$this->xcc->x44ba->{$this->xa9->x44ba->{$this->xcc->x44ba->{$this->x7f->x44ba->x5632}}}}("\145\x6ca\163\164\151\x63\x73e\141\x72\143\150")->{$this->xcc->x4488->x4906}(${$this->xa9->x4488->x455e}->{$this->x7f->x4488->{$this->x7f->x4488->{$this->xcc->x4488->{$this->x7f->x4488->x44eb}}}})); } ${$this->xcc->x44b2->x4e10} = array(); ${$this->x7f->x44ba->x5658} = Mage::$x5d01()->{$this->x7f->x4488->x4928}(); foreach (Mage::$x5d01()->{$this->xa9->x4488->x4952}() as ${$this->x7f->x44b2->{$this->x7f->x44b2->x4e22}}) {  if (!${$this->xa9->x44ba->x5664}->{$this->xcc->x4488->x4960}()) { continue; } Mage::$x5d01()->{$this->xcc->x4488->x497e}(${$this->xa9->x44ba->{$this->xcc->x44ba->x5665}}); ${$this->xa9->x4488->{$this->x7f->x4488->{$this->xa9->x4488->{$this->xa9->x4488->{$this->xcc->x4488->x45b1}}}}} = (int) ${$this->x7f->x44b2->{$this->x7f->x44b2->x4e22}}->{$this->xcc->x4488->x498a}(); if (isset(${$this->x7f->x44b2->x4ddc}['store_id'])) { if (!$x430d(${$this->xa9->x4488->x4557}['store_id'])) { ${$this->xa9->x44b2->{$this->xa9->x44b2->x4ddf}}['store_id'] = array(${$this->xcc->x44ba->{$this->xcc->x44ba->{$this->xa9->x44ba->x5612}}}['store_id']); } if (!$x4318(${$this->xa9->x4488->{$this->x7f->x4488->{$this->xa9->x4488->x45ac}}}, ${$this->xcc->x4488->{$this->xa9->x4488->{$this->x7f->x4488->x455d}}}['store_id'])) { continue; } } $this->{$this->xcc->x4488->x4993}(' > Exporting categories of store %s', ${$this->xa9->x44ba->{$this->xcc->x44ba->{$this->xcc->x44ba->x5668}}}->{$this->x7f->x4488->x49a1}()); ${$this->xa9->x4488->{$this->x7f->x4488->x4595}}[${$this->xa9->x4488->{$this->x7f->x4488->{$this->xa9->x4488->x45ac}}}] = array();  ${$this->xa9->x4488->{$this->x7f->x4488->{$this->xa9->x4488->x45b7}}} = $this->{$this->x7f->x4488->x49b2}('category', ${$this->xcc->x4488->{$this->xcc->x4488->x45a6}}); ${$this->xa9->x4488->x45b8} = Mage::$x5d30('catalog/category')->{$this->xcc->x4488->x49d2}(); ${$this->xa9->x44ba->x567f}->{$this->xa9->x4488->x49e1}(${$this->xa9->x44ba->{$this->xcc->x44ba->x5665}}->{$this->xcc->x4488->x498a}()); ${$this->x7f->x4488->{$this->xcc->x4488->{$this->xa9->x4488->x45cb}}} = ${$this->xa9->x44ba->{$this->xcc->x44ba->x5665}}->{$this->xa9->x4488->x49f9}(); ${$this->xa9->x44ba->x567f}->{$this->xa9->x4488->x49ff}() ->{$this->xa9->x4488->x4a0c}(${$this->xa9->x4488->{$this->xa9->x4488->x45b5}}) ->{$this->xcc->x4488->x4a1b}('path', array('like' => "1/{${$this->x7f->x4488->{$this->xcc->x4488->{$this->xa9->x4488->x45cb}}}}/%")); ${$this->x7f->x44ba->{$this->xcc->x44ba->{$this->xcc->x44ba->x5686}}}->{$this->xa9->x4488->x4a2c}(); foreach (${$this->xa9->x44ba->x567f} as ${$this->x7f->x44ba->{$this->x7f->x44ba->{$this->x7f->x44ba->x568e}}}) { ${$this->x7f->x44ba->{$this->x7f->x44ba->{$this->x7f->x44ba->x568e}}}->{$this->xa9->x4488->x4a37}()->{$this->xcc->x4488->x4a41}(${$this->xa9->x44ba->x5664}); ${$this->xcc->x44b2->x4e10}[${$this->x7f->x44ba->x566b}][${$this->xcc->x4488->x45cd}->{$this->xcc->x4488->x498a}()] = $x4363( array( 'id' => ${$this->xcc->x4488->x45cd}->{$this->xcc->x4488->x498a}(), '_url' => ${$this->xcc->x44b2->x4e48}->{$this->xa9->x4488->x4a76}(), '_path' => $this->{$this->xa9->x44b2->{$this->xcc->x44b2->{$this->xa9->x44b2->{$this->xcc->x44b2->x4fcb}}}}(${$this->xcc->x44b2->x4e48}), ), ${$this->x7f->x44ba->{$this->xa9->x44ba->x568c}}->{$this->xa9->x4488->x4a8b}(${$this->x7f->x44b2->x4e2b}) ); } $this->{$this->xcc->x4488->x4993}(' > Categories exported'); } Mage::$x5d01()->{$this->xcc->x4488->x497e}(${$this->xcc->x44ba->{$this->xa9->x44ba->x565b}}); return ${$this->xa9->x44ba->{$this->x7f->x44ba->x5650}}; } catch (Exception $e) { throw $e; } }  public function getSearchableAttributes($x4390 = null) {$x10b5 = $this->xcc->x44b2->{$this->xa9->x44b2->{$this->xa9->x44b2->{$this->xcc->x44b2->x50f2}}};$x598c = "\x68el\x70\x65\x72";$x5d01 = "\141pp";$x5d30 = "ge\164M\x6f\144e\x6c";$x5b85 = "\147\145\164\x52\145\163\157ur\143\145M\x6f\x64el";$x5c92 = "d\x69\x73\x70\141tc\150E\166\x65n\x74"; if (null === $this->{$this->xcc->x4488->{$this->xcc->x4488->{$this->xcc->x4488->{$this->xa9->x4488->x44fc}}}}) { $this->{$this->xcc->x4488->{$this->xcc->x4488->{$this->xcc->x4488->{$this->xa9->x4488->x44fc}}}} = array(); ${$this->xcc->x44b2->x4ed9} = $this->{$this->x7f->x4488->x4ade}()->{$this->x7f->x4488->x4ae3}('catalog_category'); ${$this->x7f->x4488->{$this->xa9->x4488->{$this->xa9->x4488->{$this->xa9->x4488->x469b}}}} = ${$this->xcc->x44b2->x4ed9}->{$this->xcc->x4488->x4af5}();  ${$this->x7f->x44b2->{$this->xa9->x44b2->{$this->x7f->x44b2->{$this->xa9->x44b2->x4eec}}}} = Mage::$x5b85('catalog/category_attribute_collection') ->{$this->xa9->x4488->x4b14}(${$this->xcc->x44b2->{$this->x7f->x44b2->{$this->xcc->x44b2->{$this->xcc->x44b2->x4edd}}}}->{$this->xcc->x4488->x4b21}()) ->{$this->xa9->x4488->x4b2d}('attribute_code', array( 'in' => $this->{$this->x7f->x4488->x49b2}('category', ${$this->xcc->x44ba->{$this->xcc->x44ba->{$this->xcc->x44ba->{$this->xa9->x44ba->{$this->x7f->x44ba->x572b}}}}}) )); ${$this->x7f->x44b2->x4ef1} = ${$this->xa9->x44ba->x5748}->{$this->xa9->x4488->x4b4b}(); foreach (${$this->xcc->x44ba->{$this->x7f->x44ba->{$this->xa9->x44ba->{$this->x7f->x44ba->x575d}}}} as ${$this->x7f->x44b2->{$this->xcc->x44b2->{$this->x7f->x44b2->{$this->xcc->x44b2->x4f03}}}}) {  ${$this->xa9->x4488->x46b0}->{$this->xa9->x4488->x4b54}(${$this->xa9->x44ba->{$this->xa9->x44ba->{$this->x7f->x44ba->x573b}}}); $this->{$this->xcc->x4488->{$this->xcc->x4488->{$this->xcc->x4488->{$this->xa9->x4488->x44fc}}}}[${$this->xcc->x4488->{$this->xa9->x4488->x46b2}}->{$this->x7f->x4488->x4b61}()] = ${$this->x7f->x44b2->{$this->xcc->x44b2->{$this->x7f->x44b2->{$this->xcc->x44b2->x4f03}}}}; } } return $this->{$this->xcc->x4488->{$this->xcc->x4488->{$this->xcc->x4488->{$this->xa9->x4488->x44fc}}}}; }  public function getStoreIndexProperties($x43ed = null) {$x43b9 = $this->x7f->x4488->{$this->xa9->x4488->{$this->xcc->x4488->x4880}};$x14f = $this->xa9->x4488->x488a;$x43f4 = $this->xa9->x4488->x4894;$x116e = $this->x7f->x44b2->x50db;$x598c = "\150e\x6cper";$x5d01 = "\x61\160p";$x5d30 = "\x67\145\x74\115od\x65l";$x5b85 = "\x67etR\x65\163o\x75\x72\143\145\x4d\157de\154";$x5c92 = "di\163\160\x61t\x63\150\105\166e\x6e\x74"; ${$this->x7f->x4488->{$this->xcc->x4488->x45fd}} = Mage::$x5d01()->{$this->x7f->x4488->x4928}(${$this->x7f->x4488->{$this->xcc->x4488->x45fd}}); ${$this->xa9->x44b2->x4e62} = 'elasticsearch_category_index_properties_' . ${$this->xcc->x4488->x45fb}->{$this->xcc->x4488->x498a}(); if (Mage::$x5d01()->{$this->xa9->x4488->x4b96}('config')) { ${$this->xa9->x44ba->{$this->x7f->x44ba->{$this->x7f->x44ba->x56c2}}} = Mage::$x5d01()->{$this->xa9->x4488->x4bb7}(${$this->x7f->x4488->{$this->xa9->x4488->x460d}}); if (${$this->x7f->x4488->x4615}) { return $x43b9(${$this->xa9->x44b2->x4e6d}); } } ${$this->xa9->x44ba->{$this->x7f->x44ba->x56c0}} = array(); ${$this->x7f->x4488->{$this->xcc->x4488->{$this->xcc->x4488->x4623}}} = $this->{$this->x7f->x44ba->x57fe}(${$this->x7f->x44b2->x4e5f}); foreach (${$this->x7f->x44ba->{$this->xcc->x44ba->x56c6}} as ${$this->xa9->x4488->x4624}) {  ${$this->xcc->x4488->{$this->x7f->x4488->x4631}} = ${$this->xa9->x44b2->x4e7d}->{$this->x7f->x4488->x4b61}(); ${$this->x7f->x44ba->{$this->x7f->x44ba->{$this->xcc->x44ba->x56d7}}}->{$this->xa9->x4488->x4be2}(true); ${$this->x7f->x44ba->x56bd}[${$this->xcc->x4488->{$this->xcc->x4488->{$this->xa9->x4488->x4633}}}] = $this->{$this->x7f->x4488->x4bee}(${$this->x7f->x44ba->{$this->x7f->x44ba->x56d3}}, ${$this->x7f->x4488->{$this->xcc->x4488->x45fd}}); }  ${$this->xa9->x44ba->{$this->x7f->x44ba->x56c0}}['_url'] = array( 'type' => 'string', 'store' => true, 'index' => 'no', );  ${$this->xa9->x44ba->{$this->x7f->x44ba->{$this->x7f->x44ba->x56c2}}}['_path'] = array( 'type' => 'string', 'store' => true, 'index' => 'no', ); ${$this->x7f->x4488->x4615} = new Varien_Object(${$this->xcc->x4488->{$this->x7f->x4488->x4617}}); Mage::$x5c92('wyomind_elasticsearch_index_properties', array( 'indexer' => $this, 'store' => ${$this->x7f->x4488->{$this->xcc->x4488->{$this->xcc->x4488->{$this->xcc->x4488->x4604}}}}, 'properties' => ${$this->xa9->x44b2->x4e6d}, )); ${$this->x7f->x44b2->{$this->xa9->x44b2->x4e71}} = ${$this->xcc->x4488->{$this->xcc->x4488->{$this->x7f->x4488->x461a}}}->{$this->xa9->x4488->x48f9}(); if (Mage::$x5d01()->{$this->xa9->x4488->x4b96}('config')) { ${$this->xa9->x44ba->{$this->xa9->x44ba->x56f2}} = $this->{$this->xa9->x4488->x4c2c}(); Mage::$x5d01()->{$this->xcc->x4488->x4c38}($x43f4(${$this->xa9->x44ba->{$this->x7f->x44ba->x56c0}}), ${$this->xa9->x44b2->x4e62}, array('config'), ${$this->xa9->x44ba->{$this->x7f->x44ba->{$this->xa9->x44ba->x56f6}}}); } return ${$this->xcc->x4488->{$this->x7f->x4488->x4617}}; }  public function getCategoriesWithPathNames($x4447 = null) {$x4425 = $this->x7f->x44b2->{$this->xa9->x44b2->{$this->xa9->x44b2->x5101}};$x598c = "h\x65\154\160\x65r";$x5d01 = "\x61\160\160";$x5d30 = "\x67et\x4d\157\x64\x65l";$x5b85 = "g\x65t\x52\145\x73\157u\x72\143\x65\x4d\157\144\x65l";$x5c92 = "\x64\151\x73pat\143\x68\105\166\x65\x6e\164"; ${$this->xcc->x44b2->x4f12} = Mage::$x5d01()->{$this->x7f->x4488->x4928}(${$this->xcc->x44ba->x5772}); if (!isset($this->{$this->xa9->x4488->{$this->x7f->x4488->{$this->x7f->x4488->x4530}}}[${$this->xa9->x44b2->{$this->xa9->x44b2->x4f14}}->{$this->xcc->x4488->x498a}()])) { ${$this->xa9->x44b2->{$this->x7f->x44b2->x4f1f}} = Mage::$x5d30('catalog/category')->{$this->xcc->x4488->x49d2}() ->{$this->xa9->x4488->x4a0c}('name') ->{$this->xa9->x4488->x49ff}() ->{$this->xa9->x4488->x49e1}(${$this->xa9->x44b2->{$this->xa9->x44b2->x4f14}}->{$this->xcc->x4488->x498a}()); foreach (${$this->x7f->x4488->x46c4} as ${$this->xcc->x44ba->{$this->xcc->x44ba->{$this->xa9->x44ba->{$this->x7f->x44ba->x578a}}}}) { ${$this->xcc->x44b2->x4f24}->{$this->x7f->x4488->x4cb9}(new ArrayObject()); ${$this->xcc->x44ba->x578b} = $x4425(${$this->x7f->x4488->x46cc}->{$this->xa9->x4488->x4cc3}(), 2); if (!empty(${$this->xa9->x44b2->{$this->xcc->x44b2->x4f2f}})) { foreach (${$this->xa9->x44ba->{$this->xcc->x44ba->x578c}} as ${$this->xcc->x4488->{$this->xcc->x4488->x46e2}}) { if (${$this->x7f->x44b2->{$this->x7f->x44b2->x4f3e}} = ${$this->x7f->x44b2->x4f1c}->{$this->xa9->x4488->x4cd2}(${$this->xcc->x4488->{$this->xcc->x4488->x46e2}})) { ${$this->xcc->x44b2->x4f24}->{$this->x7f->x4488->x4ce3}()->{$this->xa9->x4488->x4cf0}(${$this->x7f->x44b2->{$this->xa9->x44b2->{$this->x7f->x44b2->{$this->xcc->x44b2->x4f47}}}}->{$this->xcc->x4488->x4cfa}()); } } } } $this->{$this->xa9->x4488->{$this->x7f->x4488->{$this->xcc->x4488->{$this->xa9->x4488->x4534}}}}[${$this->xcc->x44b2->x4f12}->{$this->xcc->x4488->x498a}()] = ${$this->xa9->x44b2->{$this->x7f->x44b2->x4f1f}}; } return $this->{$this->xa9->x4488->{$this->x7f->x4488->{$this->x7f->x4488->x4530}}}[${$this->x7f->x4488->x46bb}->{$this->xcc->x4488->x498a}()]; }  public function getCategoryPathName(Mage_Catalog_Model_Category $x4462, $x445c = ' > ') {$x4457 = $this->x7f->x4488->{$this->x7f->x4488->x48c4};$x598c = "\150\145\154pe\x72";$x5d01 = "\x61\160\160";$x5d30 = "g\x65\x74M\x6f\144\145\x6c";$x5b85 = "\x67\145\x74\122e\163o\165\x72\x63\x65\115\157\x64e\x6c";$x5c92 = "d\151spa\x74\143\150\105v\x65\156\x74"; ${$this->xa9->x44b2->{$this->xa9->x44b2->x4f5a}} = $this->{$this->x7f->x44b2->{$this->x7f->x44b2->{$this->x7f->x44b2->{$this->xa9->x44b2->{$this->xa9->x44b2->x4fbd}}}}}(${$this->x7f->x44b2->{$this->xcc->x44b2->x4f4f}}->{$this->x7f->x4488->x4928}()) ->{$this->xa9->x4488->x4cd2}(${$this->xa9->x4488->x46eb}->{$this->xcc->x4488->x498a}()); if (${$this->xcc->x44ba->{$this->xa9->x44ba->{$this->x7f->x44ba->x57b0}}}) { return $x4457(${$this->xcc->x4488->x46f5}, (array) ${$this->xcc->x44ba->{$this->x7f->x44ba->x57ae}}->{$this->x7f->x4488->x4ce3}()); } return ${$this->x7f->x44b2->{$this->xcc->x44b2->x4f4f}}->{$this->xcc->x4488->x4cfa}(); } } 