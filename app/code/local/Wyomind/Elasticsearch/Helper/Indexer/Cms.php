<?php

/**     
 * The technical support is guaranteed for all modules proposed by Wyomind.
 * The below code is obfuscated in order to protect the module's copyright as well as the integrity of the license and of the source code.
 * The support cannot apply if modifications have been made to the original source code (https://www.wyomind.com/terms-and-conditions.html).
 * Nonetheless, Wyomind remains available to answer any question you might have and find the solutions adapted to your needs.
 * Feel free to contact our technical team from your Wyomind account in My account > My tickets. 
 * Copyright Â© 2018 Wyomind. All rights reserved.
 * See LICENSE.txt for license details.
 */
  class Wyomind_Elasticsearch_Helper_Indexer_Cms extends Wyomind_Elasticsearch_Helper_Indexer_Abstract {public $xcc=null;public $xa9=null;public $x7f=null;  protected $_blockClass = 'Wyomind_Elasticsearch_Block_Autocomplete_Cms';  private $x1cd = null; public $error = "El\141st\x69cse\141r\x63\x68\x20\x43\115S\40In\144\145x\x20\x3a I\x6ev\x61\x6ci\x64\40\114\x69c\x65nse!"; public function __construct() {$x7f7 = "\x68\x65l\x70\145r";$xa50 = "\141\160p";$x897 = "\x67et\x4d\x6f\144\x65\x6c";$x927 = "\147\x65\x74\123\164or\145C\x6f\x6efig";$x9b7 = "g\x65tR\145s\x6fu\162\x63e\115\157d\x65l";$xa03 = "d\151s\x70\x61\x74\x63\x68Ev\x65n\164"; $this->_construct(); } public function _construct() {$x7f7 = "\x68e\x6c\x70e\x72";$xa50 = "a\160\160";$x897 = "g\x65t\115\157\x64\x65\154";$x927 = "g\x65\x74S\x74\x6f\x72\x65\103o\x6efig";$x9b7 = "get\x52\145s\x6fu\x72c\x65\x4d\157d\x65l";$xa03 = "\x64\x69s\160\x61\x74c\150\105\x76\x65\156t"; $this->x1cd = Mage::helper("\x6c\x69ce\x6e\x73\145\x6d\x61\156\141\x67\145\162\57\x64a\164\141"); $this->x1cd->constructor($this, func_get_args()); }  public function export($xb5 = array()) {$x81 = $this->x7f->x1bf->{$this->xa9->x1bf->{$this->x7f->x1bf->{$this->x7f->x1bf->x77a}}};$x6d = $this->x7f->x197->{$this->x7f->x197->x342};$xa4 = $this->xa9->x1bf->{$this->x7f->x1bf->{$this->x7f->x1bf->{$this->x7f->x1bf->{$this->x7f->x1bf->x796}}}};$xaf = $this->xa9->x197->x35c;$xe7 = $this->xa9->x197->{$this->xcc->x197->{$this->xa9->x197->x368}};$x7f7 = "h\145lpe\x72";$xa50 = "ap\160";$x897 = "\147e\164M\x6fd\x65\154";$x927 = "\x67\x65\x74\123t\x6f\x72\x65C\x6f\156f\x69g";$x9b7 = "\147e\164\122\145s\x6f\165\x72c\x65M\157\144\145l";$xa03 = "\x64\151\x73\160\x61tc\150\x45\166en\x74"; try { ${$this->xa9->x1bf->{$this->x7f->x1bf->x636}} = $this; ${$this->xa9->x1bf->{$this->xcc->x1bf->x639}} = "\115a\x67\x65"; ${$this->xcc->x197->{$this->xcc->x197->x207}} = "h\x65\154\x70\x65r"; ${$this->xcc->x197->x210} = "\164\150\162\157w\x45\170\x63\145\x70ti\157\x6e"; ${$this->xcc->x1bf->x656} = $x81($x6d()); ${$this->xcc->x197->{$this->xa9->x197->x1ef}}->{$this->x7f->x1bf->x611}->{$this->xcc->x197->x3b6}(${$this->xcc->x197->{$this->xcc->x197->{$this->xcc->x197->{$this->x7f->x197->x1f6}}}}, ${$this->x7f->x1bf->{$this->xa9->x1bf->x658}}); if (${$this->xcc->x197->x1ee}->{$this->x7f->x197->x3d5}(${$this->xa9->x197->{$this->x7f->x197->x222}}) != $x81(${$this->xcc->x197->x21f})) { ${$this->xcc->x197->x1fd}::${$this->xcc->x197->{$this->x7f->x197->{$this->xa9->x197->{$this->x7f->x197->x217}}}}(${$this->xcc->x197->x1fd}::${$this->xcc->x197->{$this->xa9->x197->{$this->x7f->x197->x208}}}("\x65\x6c\x61\x73\164ics\x65\141\x72\143h")->{$this->x7f->x197->x3e3}(${$this->xcc->x197->{$this->xcc->x197->{$this->xcc->x197->{$this->x7f->x197->{$this->xcc->x197->x1fb}}}}}->{$this->x7f->x197->{$this->x7f->x197->{$this->xa9->x197->{$this->xa9->x197->x1de}}}})); } ${$this->xa9->x197->{$this->x7f->x197->{$this->xa9->x197->{$this->xa9->x197->x22c}}}} = array(); foreach (Mage::$xa50()->{$this->x7f->x197->x3f3}() as ${$this->xcc->x1bf->x662}) {  if (!${$this->xa9->x197->{$this->x7f->x197->{$this->xcc->x197->{$this->xa9->x197->{$this->x7f->x197->x243}}}}}->{$this->x7f->x197->x3fe}()) { continue; } ${$this->xcc->x1bf->{$this->x7f->x1bf->{$this->x7f->x1bf->{$this->xcc->x1bf->x67e}}}} = (int) ${$this->xa9->x197->{$this->xcc->x197->x235}}->{$this->xa9->x197->x40c}(); if (isset(${$this->xcc->x1bf->x627}['store_id'])) { if (!$xa4(${$this->x7f->x197->{$this->x7f->x197->x1e4}}['store_id'])) { ${$this->xcc->x1bf->x627}['store_id'] = array(${$this->x7f->x197->{$this->x7f->x197->{$this->xcc->x197->{$this->x7f->x197->x1e9}}}}['store_id']); } if (!$xaf(${$this->xcc->x197->{$this->xa9->x197->{$this->xa9->x197->x24e}}}, ${$this->xa9->x1bf->{$this->xcc->x1bf->x62c}}['store_id'])) { continue; } } $this->{$this->xa9->x197->x414}(' > Exporting CMS pages of store %s', ${$this->xcc->x1bf->{$this->xcc->x1bf->{$this->x7f->x1bf->x667}}}->{$this->x7f->x197->x41d}()); ${$this->xa9->x197->{$this->x7f->x197->{$this->xa9->x197->x22b}}}[${$this->x7f->x1bf->x673}] = array();  ${$this->x7f->x1bf->{$this->xa9->x1bf->x688}} = $this->{$this->xcc->x197->x429}('cms', ${$this->xcc->x1bf->{$this->xcc->x1bf->{$this->x7f->x1bf->x667}}}); ${$this->xa9->x1bf->{$this->x7f->x1bf->x695}} = Mage::$x897('cms/page')->{$this->xcc->x197->x444}() ->{$this->x7f->x197->x44d}(${$this->xcc->x197->x230}->{$this->xa9->x197->x40c}()) ->{$this->xcc->x197->x46e}(${$this->x7f->x197->x252}); if (${$this->x7f->x1bf->x6a2} = $this->{$this->xa9->x1bf->x747}(${$this->xcc->x197->x230})) { ${$this->xa9->x1bf->x690}->{$this->xa9->x197->x494}('page_id', array('nin' => ${$this->xcc->x197->{$this->xa9->x197->{$this->xcc->x197->{$this->x7f->x197->x267}}}})); } ${$this->xa9->x197->{$this->x7f->x197->{$this->x7f->x197->x25b}}}->{$this->xa9->x197->x494}('is_active', array('eq' => 1)); foreach (${$this->xa9->x1bf->{$this->xcc->x1bf->{$this->xcc->x1bf->{$this->x7f->x1bf->{$this->xa9->x1bf->x69d}}}}} as ${$this->xcc->x1bf->{$this->xcc->x1bf->{$this->x7f->x1bf->x6af}}}) { ${$this->xa9->x1bf->{$this->xa9->x1bf->{$this->xcc->x1bf->x65f}}}[${$this->xcc->x1bf->{$this->x7f->x1bf->{$this->xcc->x1bf->x67a}}}][${$this->x7f->x197->{$this->xcc->x197->x26d}}->{$this->xa9->x197->x40c}()] = $xe7( array('id' => ${$this->xcc->x1bf->{$this->xcc->x1bf->{$this->xa9->x1bf->{$this->x7f->x1bf->{$this->xcc->x1bf->x6b5}}}}}->{$this->xa9->x197->x40c}()), ${$this->x7f->x197->{$this->xcc->x197->x26d}}->{$this->xa9->x197->x4ca}(${$this->x7f->x1bf->{$this->xa9->x1bf->x688}}) ); } $this->{$this->xa9->x197->x414}(' > CMS pages exported'); } return ${$this->xa9->x197->{$this->x7f->x197->{$this->xa9->x197->x22b}}}; } catch (Exception $e) { throw $e; } }  public function getExcludedPageIds($xfe = null) {$xfd = $this->xcc->x197->x370;$x7f7 = "h\x65\x6c\160e\162";$xa50 = "\141\160\x70";$x897 = "g\x65t\115\157d\x65l";$x927 = "g\145\x74\x53\164o\x72\x65\x43\x6f\156f\151\147";$x9b7 = "g\145t\122\145\163ou\162c\x65\x4d\x6f\144\x65\154";$xa03 = "\x64i\x73\160\x61t\x63\x68E\166\x65\156\x74"; return $xfd(',', Mage::$x927('elasticsearch/cms/excluded_pages', ${$this->xcc->x1bf->x6bb})); }  public function getStoreIndexProperties($x165 = null) {$x120 = $this->xcc->x1bf->{$this->x7f->x1bf->{$this->xa9->x1bf->{$this->xa9->x1bf->x7c8}}};$x14f = $this->x7f->x197->x385;$x179 = $this->x7f->x197->{$this->xa9->x197->x39b};$x7f7 = "\150\145\154\x70\x65\162";$xa50 = "\141\x70\160";$x897 = "g\145\x74Mo\x64e\x6c";$x927 = "get\x53\x74o\162\x65\x43on\x66i\x67";$x9b7 = "g\x65tR\145\x73\x6f\165\162\x63\x65\115odel";$xa03 = "\x64i\163\x70atc\x68E\x76en\164"; ${$this->x7f->x1bf->{$this->xa9->x1bf->{$this->x7f->x1bf->{$this->x7f->x1bf->x6cf}}}} = Mage::$xa50()->{$this->xa9->x197->x4fd}(${$this->x7f->x197->x287}); ${$this->x7f->x197->x291} = 'elasticsearch_cms_index_properties_' . ${$this->x7f->x197->x287}->{$this->xa9->x197->x40c}(); if (Mage::$xa50()->{$this->x7f->x197->x531}('config')) { ${$this->xa9->x1bf->{$this->xcc->x1bf->{$this->xcc->x1bf->x6e0}}} = Mage::$xa50()->{$this->x7f->x197->x54d}(${$this->xa9->x1bf->{$this->xcc->x1bf->x6d9}}); if (${$this->xa9->x1bf->{$this->xcc->x1bf->x6de}}) { return $x120(${$this->xa9->x1bf->{$this->xcc->x1bf->{$this->xa9->x1bf->{$this->xcc->x1bf->x6e5}}}}); } } ${$this->x7f->x197->{$this->x7f->x197->x2b1}} = $this->{$this->xcc->x197->x55c}(${$this->xa9->x197->{$this->x7f->x197->x288}}); ${$this->x7f->x1bf->x6db} = array(); ${$this->x7f->x197->{$this->x7f->x197->x2c0}} = Mage::$x9b7('cms/page'); ${$this->x7f->x197->{$this->xa9->x197->x2c5}} = ${$this->xa9->x197->x2be}->{$this->xcc->x197->x57d}()->{$this->x7f->x197->x58c}(${$this->x7f->x197->{$this->x7f->x197->x2c0}}->{$this->x7f->x197->x59e}()); foreach ($this->{$this->xcc->x197->x429}('cms', ${$this->xa9->x197->{$this->x7f->x197->x288}}) as ${$this->x7f->x197->x2cd}) { if (isset(${$this->xa9->x1bf->{$this->x7f->x1bf->{$this->xa9->x1bf->{$this->x7f->x1bf->x70e}}}}[${$this->x7f->x197->{$this->xa9->x197->{$this->xcc->x197->x2d4}}}])) { ${$this->xa9->x1bf->{$this->xcc->x1bf->{$this->xcc->x1bf->x6e0}}}[${$this->xcc->x1bf->x712}] = array( 'type' => 'string', 'analyzer' => 'std', 'include_in_all' => true, 'boost' => 1,  'fields' => array( 'std' => array( 'type' => 'string', 'analyzer' => 'std', ) ), ); if (${$this->x7f->x197->{$this->x7f->x197->{$this->xa9->x197->x2ca}}}[${$this->x7f->x197->{$this->xa9->x197->{$this->x7f->x197->{$this->xcc->x197->{$this->xa9->x197->x2db}}}}}]['DATA_TYPE'] == Varien_Db_Ddl_Table::TYPE_VARCHAR) { ${$this->xcc->x197->{$this->x7f->x197->{$this->x7f->x197->x2a8}}}[${$this->x7f->x197->{$this->xa9->x197->{$this->x7f->x197->{$this->x7f->x197->x2d8}}}}]['fields'] = $x14f(${$this->xa9->x1bf->{$this->xcc->x1bf->{$this->xa9->x1bf->{$this->xcc->x1bf->x6e5}}}}[${$this->x7f->x197->{$this->xa9->x197->{$this->xcc->x197->x2d4}}}]['fields'], array( 'prefix' => array( 'type' => 'string', 'analyzer' => 'text_prefix', 'search_analyzer' => 'std', ), 'suffix' => array( 'type' => 'string', 'analyzer' => 'text_suffix', 'search_analyzer' => 'std', ), )); } if (isset(${$this->xa9->x1bf->x6ed}['analysis']['analyzer']['language'])) { ${$this->xa9->x1bf->{$this->xcc->x1bf->{$this->xa9->x1bf->{$this->xcc->x1bf->x6e5}}}}[${$this->x7f->x197->{$this->xa9->x197->{$this->xcc->x197->x2d4}}}]['analyzer'] = 'language'; } } } ${$this->x7f->x197->x2a1} = new Varien_Object(${$this->xa9->x1bf->{$this->xcc->x1bf->x6de}}); Mage::$xa03('wyomind_elasticsearch_index_properties', array( 'indexer' => $this, 'store' => ${$this->xa9->x197->{$this->xa9->x197->{$this->xcc->x197->x28a}}}, 'properties' => ${$this->xcc->x197->{$this->xcc->x197->x2a5}}, )); ${$this->xa9->x1bf->{$this->xcc->x1bf->x6de}} = ${$this->xa9->x1bf->{$this->xcc->x1bf->{$this->xa9->x1bf->{$this->x7f->x1bf->{$this->xcc->x1bf->x6ea}}}}}->{$this->x7f->x197->x3d5}(); if (Mage::$xa50()->{$this->x7f->x197->x531}('config')) { ${$this->xa9->x197->x2e0} = $this->{$this->xa9->x197->x5e0}(); Mage::$xa50()->{$this->x7f->x197->x5fe}($x179(${$this->xcc->x197->{$this->xcc->x197->x2a5}}), ${$this->xcc->x1bf->x6d6}, array('config'), ${$this->x7f->x197->{$this->xa9->x197->{$this->xcc->x197->x2e6}}}); } return ${$this->xcc->x197->{$this->x7f->x197->{$this->x7f->x197->x2a8}}}; } } 